{
  "version": 3,
  "sources": ["browser-route-module:E:\\Workspace\\jsonhero-web-main\\app\\routes\\actions\\createFromFile.ts?browser", "../../../../app/routes/actions/createFromFile.ts"],
  "sourcesContent": ["export * from \"E:\\\\Workspace\\\\jsonhero-web-main\\\\app\\\\routes\\\\actions\\\\createFromFile.ts\";", "import { ActionFunction, redirect } from \"remix\";\nimport invariant from \"tiny-invariant\";\nimport { sendEvent } from \"~/graphJSON.server\";\nimport { createFromRawJson } from \"~/jsonDoc.server\";\n\ntype CreateFromFileError = {\n  filename?: boolean;\n  rawJson?: boolean;\n};\n\nexport const action: ActionFunction = async ({ request, context }) => {\n  const formData = await request.formData();\n  const filename = formData.get(\"filename\");\n  const rawJson = formData.get(\"rawJson\");\n\n  const errors: CreateFromFileError = {};\n\n  if (!filename) errors.filename = true;\n  if (!rawJson) errors.rawJson = true;\n\n  if (Object.keys(errors).length) {\n    return errors;\n  }\n\n  invariant(typeof filename === \"string\", \"filename must be a string\");\n  invariant(typeof rawJson === \"string\", \"rawJson must be a string\");\n\n  const doc = await createFromRawJson(filename, rawJson);\n\n  const url = new URL(request.url);\n\n  context.waitUntil(\n    sendEvent({\n      type: \"create\",\n      from: \"file\",\n      id: doc.id,\n      source: url.searchParams.get(\"utm_source\") ?? url.hostname,\n    })\n  );\n\n  return redirect(`/j/${doc.id}`);\n};\n"],
  "mappings": ";;;;;;;;;;;;;;;;;;AAAA;;;ACAA;AAEA,uBAA0B;AAC1B,qBAAkC;AAO3B,IAAM,SAAyB,OAAO,EAAE,SAAS,cAAc;AAVtE;AAWE,QAAM,WAAW,MAAM,QAAQ;AAC/B,QAAM,WAAW,SAAS,IAAI;AAC9B,QAAM,UAAU,SAAS,IAAI;AAE7B,QAAM,SAA8B;AAEpC,MAAI,CAAC;AAAU,WAAO,WAAW;AACjC,MAAI,CAAC;AAAS,WAAO,UAAU;AAE/B,MAAI,OAAO,KAAK,QAAQ,QAAQ;AAC9B,WAAO;AAAA;AAGT,YAAU,OAAO,aAAa,UAAU;AACxC,YAAU,OAAO,YAAY,UAAU;AAEvC,QAAM,MAAM,MAAM,sCAAkB,UAAU;AAE9C,QAAM,MAAM,IAAI,IAAI,QAAQ;AAE5B,UAAQ,UACN,gCAAU;AAAA,IACR,MAAM;AAAA,IACN,MAAM;AAAA,IACN,IAAI,IAAI;AAAA,IACR,QAAQ,UAAI,aAAa,IAAI,kBAArB,YAAsC,IAAI;AAAA;AAItD,SAAO,SAAS,MAAM,IAAI;AAAA;",
  "names": []
}
