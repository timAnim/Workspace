import{a as F}from"/build/_shared/chunk-UMFVCOIP.js";import{a as n}from"/build/_shared/chunk-CEUMSNV4.js";import{a as g}from"/build/_shared/chunk-3DZTFMOM.js";import{b as l}from"/build/_shared/chunk-GZMK5MKI.js";import{d as f,i as t}from"/build/_shared/chunk-2ADOHOB6.js";t();t();var u=f(g()),p=f(F()),h=async({request:a,context:w})=>{var c;let i=await a.formData(),e=i.get("filename"),o=i.get("rawJson"),r={};if(e||(r.filename=!0),o||(r.rawJson=!0),Object.keys(r).length)return r;n(typeof e=="string","filename must be a string"),n(typeof o=="string","rawJson must be a string");let s=await(0,p.createFromRawJson)(e,o),m=new URL(a.url);return w.waitUntil((0,u.sendEvent)({type:"create",from:"file",id:s.id,source:(c=m.searchParams.get("utm_source"))!=null?c:m.hostname})),l(`/j/${s.id}`)};export{h as action};
