import{a as u}from"/build/_shared/chunk-UMFVCOIP.js";import{a as n}from"/build/_shared/chunk-CEUMSNV4.js";import{a as s}from"/build/_shared/chunk-3DZTFMOM.js";import{a as r}from"/build/_shared/chunk-GZMK5MKI.js";import{d as c,i as e}from"/build/_shared/chunk-2ADOHOB6.js";e();e();var a=c(s()),m=c(u()),x=async({params:i,request:d,context:p})=>{n(i.id,"expected params.id");let o=(await d.formData()).get("title");n(typeof o=="string","expected title");try{let t=await(0,m.updateDocument)(i.id,o);return t?(p.waitUntil((0,a.sendEvent)({type:"update-doc",id:t.id,title:o})),r(t)):r({error:"No document with that slug"})}catch(t){return t instanceof Error?r({error:t.message}):r({error:"Unknown error"})}};export{x as action};
